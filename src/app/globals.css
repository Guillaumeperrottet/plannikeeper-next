@tailwind base;
@tailwind components;
@tailwind utilities;

/* Le reste de vos styles personnalisés */

/* Styles d'impression pour l'agenda todo list */
@media print {
}

/* Base styles pour l'agenda */
.calendar-container,
[data-todo-list-agenda] {
  touch-action: manipulation;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

/* Styles de base améliorés pour l'agenda */
[data-todo-list-agenda] {
  /* Empêcher le scroll de la page sous l'agenda quand il est ouvert */
  overscroll-behavior: contain;
  /* Ajouter une ombre portable avec une légère transition */
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.08);
  transition: box-shadow 0.3s ease;
  /* Assurer que l'agenda est bien au-dessus des autres éléments */
  z-index: 100;
}

/* L'agenda ouvert a une ombre plus prononcée */
[data-todo-list-agenda].expanded {
  box-shadow: 0 -8px 30px rgba(0, 0, 0, 0.15);
}

/* Améliorer le handle de drag */
.drag-handle {
  width: 36px;
  height: 4px;
  background-color: var(--border);
  border-radius: 4px;
  margin: 3px auto;
  opacity: 0.6;
  transition: all 0.2s ease;
}

/* Pendant le drag, rendre le handle plus visible */
.dragging-active .drag-handle {
  width: 48px;
  opacity: 1;
  background-color: var(--primary);
}

/* Content de l'agenda - éviter le scroll de la page principale */
.agenda-content {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  scroll-padding: 16px;
}

/* Styles spécifiques mobile */
@media (max-width: 767px) {
  [data-todo-list-agenda] {
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
  }

  /* Augmenter la zone d'interaction pour les tâches */
  [data-todo-list-agenda] li {
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 12px;
    background-color: var(--card);
    border: 1px solid var(--border);
    transition:
      transform 0.2s,
      background-color 0.2s;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  [data-todo-list-agenda] li:active {
    transform: scale(0.98);
    background-color: var(--muted);
  }

  /* Améliorer l'accessibilité des contrôles sur mobile */
  [data-todo-list-agenda] button,
  [data-todo-list-agenda] select {
    min-height: 44px;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* Optimisation pour PWA */
@media (display-mode: standalone) {
  body {
    /* Empêcher le pull-to-refresh et les rebonds */
    overscroll-behavior: contain;

    /* Pad pour éviter que l'agenda ne soit caché par la barre de navigation */
    padding-bottom: env(safe-area-inset-bottom, 16px);
  }

  /* Ajustements pour iPhone avec le notch */
  @supports (padding: max(0px)) {
    [data-todo-list-agenda] {
      padding-bottom: max(16px, env(safe-area-inset-bottom));
    }
  }

  /* Amélioration des interactions tactiles */
  button,
  select,
  [data-todo-list-agenda] li {
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }

  button:active,
  select:active {
    transform: scale(0.97);
  }

  /* Taille plus grande pour la poignée de drag */
  .drag-handle {
    width: 40px;
    height: 5px;
    margin-top: 4px;
  }
}

/* Animation fluide pour le switch entre les modes */
.month-transition {
  animation: fadeTransition 0.3s ease-in-out;
}

@keyframes fadeTransition {
  0% {
    opacity: 0.7;
    transform: scale(0.98);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

/* Styles pour le bouton flottant de fermeture */
.close-button-mobile {
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.2));
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

@layer base {
  :root {
    --background: #f9f3ec;
    --foreground: #141313;
    --card: #f5f3ef;
    --card-foreground: #21201f;
    --destructive-background: #fee2e2;
    --destructive-foreground: #b91c1c;
    --destructive-border: #fca5a5;
    --popover: #fcf9f5;
    --popover-foreground: #190f00;
    --primary: #d9840d;
    --primary-foreground: #000000;
    --secondary: #d6cec2;
    --secondary-foreground: #000000;
    --success-background: #dcfce7;
    --success-foreground: #16a34a;
    --success-border: #86efac;
    --muted: #e8ebe0;
    --muted-foreground: #62605d;
    --accent: #dde0d1;
    --accent-foreground: #21201f;
    --destructive: #b31919;
    --destructive-foreground: #f3f2f2;
    --border: #beac93;
    --info-background: #e0f2fe;
    --info-foreground: #0284c7;
    --info-border: #7dd3fc;
    --input: #6c5a41;
    --ring: #da850d;
    --radius: 0.5rem;

    --sidebar-background: #f2e8d9;
    --sidebar-foreground: #121211;
    --sidebar-primary: #c6780c;
    --sidebar-primary-foreground: #000000;
    --sidebar-accent: #d4d8c5;
    --sidebar-accent-foreground: #000000;
    --sidebar-border: #b8a589;
    --sidebar-ring: #e36002;

    --warning-background: #ffedd5;
    --warning-foreground: #f59e0b;
    --warning-border: #fcd34d;
  }

  .dark {
    --background: #19140d;
    --foreground: #f3f2f2;
    --card: #100d0a;
    --card-foreground: #f3f2f2;
    --destructive-background: #450a0a;
    --destructive-foreground: #f87171;
    --destructive-border: #b91c1c;
    --info-background: #0c4a6e;
    --info-foreground: #38bdf8;
    --info-border: #0284c7;
    --popover: #110d09;
    --popover-foreground: #f3f2f2;
    --primary: #d9840d;
    --primary-foreground: #000000;
    --secondary: #2e281f;
    --secondary-foreground: #ffffff;
    --success-background: #064e3b;
    --success-foreground: #4ade80;
    --success-border: #10b981;
    --muted: #393d29;
    --muted-foreground: #a2a09d;
    --accent: #393d29;
    --accent-foreground: #ececeb;
    --destructive: #b31919;
    --destructive-foreground: #f3f2f2;
    --border: #6c5a41;
    --input: #6c5a41;
    --ring: #da850d;
    --radius: 0.5rem;

    --sidebar-background: #211b12;
    --sidebar-foreground: #ffffff;
    --sidebar-primary: #ae690a;
    --sidebar-primary-foreground: #000000;
    --sidebar-accent: #303423;
    --sidebar-accent-foreground: #ffffff;
    --sidebar-border: #66553d;
    --sidebar-ring: #e36002;

    --warning-background: #451a03;
    --warning-foreground: #fbbf24;
    --warning-border: #d97706;
  }
}
